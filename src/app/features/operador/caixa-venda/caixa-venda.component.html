<div class="grid">
  <div class="col-12 md:col-7">
    <p-card header="Adicionar Produto">
      <div class="flex gap-2 mb-3">
        <p-dropdown [options]="produtosDisponiveis" [(ngModel)]="produtoSelecionado" optionLabel="label" [filter]="true" placeholder="Buscar Produto..." styleClass="w-full"></p-dropdown>
        <p-inputNumber [(ngModel)]="quantidade" [min]="1" [showButtons]="true" buttonLayout="horizontal" size="3"></p-inputNumber>
        <p-button icon="pi pi-plus" (onClick)="adicionarAoCarrinho()" [disabled]="!produtoSelecionado"></p-button>
      </div>
      
      <p-table [value]="carrinho" [scrollable]="true" scrollHeight="300px" styleClass="mt-3">
        <ng-template pTemplate="header">
          <tr><th>Produto</th><th>Qtd</th><th>Subtotal</th></tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td>{{item.nome}}</td>
            <td>{{item.quantidade}}</td>
            <td>{{item.subtotal | currency:'BRL'}}</td>
          </tr>
        </ng-template>
      </p-table>
    </p-card>
  </div>

  <div class="col-12 md:col-5">
    <p-card header="Pagamento" styleClass="surface-50">
      <div class="text-4xl font-bold mb-4 text-primary">Total: {{ totalVenda | currency:'BRL' }}</div>
      
      <div class="mb-3">
        <label class="block font-bold mb-2">Valor Recebido</label>
        <p-inputNumber [(ngModel)]="valorRecebido" mode="currency" currency="BRL" locale="pt-BR" styleClass="w-full" class="w-full"></p-inputNumber>
      </div>

      <div class="text-2xl mb-4" *ngIf="valorRecebido">
        Troco: <span [class.text-red-500]="troco < 0" [class.text-green-500]="troco >= 0">{{ troco | currency:'BRL' }}</span>
      </div>

      <p-button label="FINALIZAR VENDA" styleClass="w-full p-button-lg p-button-success" (onClick)="finalizarVenda()" [disabled]="!valorRecebido || troco < 0"></p-button>
    </p-card>
  </div>
</div>